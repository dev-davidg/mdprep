<!DOCTYPE html>
<html lang="sk">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lexend:wght@400;500;600;700&display=swap">
<title>MDprep – Výber režimu</title>
<link rel="stylesheet" href="/stitch/styles.v2.css?v=17"/>
<link rel="stylesheet" href="/stitch/theme.css?v=17"/>
<link rel="stylesheet" href="/stitch/pro.css?v=2"/>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<style>
  /* v18: width failsafe to match 56rem like other pages */
  @media (min-width:1024px){
    body.mx-page main{max-width:56rem!important;margin-left:auto!important;margin-right:auto!important}
    body.mx-page header > *,
    body.mx-page header :is(div,nav){max-width:56rem!important;margin-left:auto!important;margin-right:auto!important}
  }
  body{ min-height:max(884px,100dvh);}
</style>
</head>
<body class="bg-gray-50 text-gray-900 mx-page">
<div class="relative min-h-screen flex flex-col">
  <!-- Header -->
  <header class="bg-white shadow-sm sticky top-0 z-10">
    <div class="mx-auto max-w-4xl p-4 pb-3 flex items-center justify-center">
      <h1 class="text-xl font-bold leading-tight tracking-tight">Výber režimu</h1>
    </div>
  </header>

  <main  class="mx-auto max-w-4xl w-full p-4 space-y-6 page-fade">
    <!-- Step 1: Mode -->
    <section class="rounded-2xl border border-gray-200 bg-white shadow-sm p-4">
      <h2 class="text-base font-bold text-gray-900 mb-3">1. Vyberte režim</h2>
      <div id="modeGroup" role="radiogroup" aria-label="Režim" class="grid grid-cols-1 sm:grid-cols-2 gap-3">
        <button type="button" data-mode="learn" role="radio" aria-checked="false"
          class="mode-card rounded-2xl border border-gray-200 bg-white p-4 text-left hover:border-blue-300 focus:outline-none focus:ring-2 focus:ring-blue-500/40">
          <p class="text-sm font-semibold text-gray-900">Učiaci režim</p>
          <p class="text-xs text-gray-600 mt-1">Okamžite vidíte správnu odpoveď a vysvetlenie.</p>
        </button>

        <button type="button" data-mode="test" role="radio" aria-checked="false"
          class="mode-card rounded-2xl border border-gray-200 bg-white p-4 text-left hover:border-blue-300 focus:outline-none focus:ring-2 focus:ring-blue-500/40">
          <p class="text-sm font-semibold text-gray-900">Testovací režim</p>
          <p class="text-xs text-gray-600 mt-1">Bez odhalenia správnych odpovedí, s časovačom.</p>
        </button>
      </div>
    </section>

    <!-- Step 2: Question count -->
    <section class="rounded-2xl border border-gray-200 bg-white shadow-sm p-4">
      <h2 class="text-base font-bold text-gray-900 mb-3">2. Počet otázok</h2>
      <div id="countGroup" class="flex flex-wrap gap-2" aria-label="Počet otázok">
        <!-- selectable chips -->
        <button type="button" data-count="5"  class="count-chip px-4 py-2 rounded-full border border-gray-200 bg-white text-sm font-semibold hover:border-blue-300">5</button>
        <button type="button" data-count="10" class="count-chip px-4 py-2 rounded-full border border-gray-200 bg-white text-sm font-semibold hover:border-blue-300">10</button>
        <button type="button" data-count="20" class="count-chip px-4 py-2 rounded-full border border-gray-200 bg-white text-sm font-semibold hover:border-blue-300">20</button>
        <button type="button" data-count="30" class="count-chip px-4 py-2 rounded-full border border-gray-200 bg-white text-sm font-semibold hover:border-blue-300">30</button>
        <button type="button" data-count="50" class="count-chip px-4 py-2 rounded-full border border-gray-200 bg-white text-sm font-semibold hover:border-blue-300">50</button>
        <!-- custom -->
        <div class="flex items-center gap-2 ml-2">
          <input id="countInput" type="number" inputmode="numeric" min="1" max="200" placeholder="Vlastné"
            class="w-28 rounded-full border-gray-300 text-sm px-3 py-2" aria-label="Vlastný počet otázok">
          <button id="countApply" type="button"
            class="rounded-full bg-blue-50 text-blue-700 text-xs font-bold px-3 py-1.5 hover:bg-blue-100">Použiť</button>
        </div>
      </div>
      <p class="text-xs text-gray-600 mt-2">Zvoľte niektorý z rýchlych počtov alebo zadajte vlastné číslo (max. 200).</p>
    </section>

    <!-- Continue -->
    <div class="flex items-center justify-end">
      <button id="continueBtn" disabled
        class="rounded-full bg-blue-500/50 text-white text-sm font-bold px-6 py-3 cursor-not-allowed">
        Pokračovať
      </button>
    </div>
  </main>
</div>

<!-- Unified bottom nav -->
<script src="/stitch/common-nav.v3.js?v=17"></script>

<script>
(function(){
  const modeCards = Array.from(document.querySelectorAll('.mode-card'));
  const countChips = Array.from(document.querySelectorAll('.count-chip'));
  const countInput = document.getElementById('countInput');
  const countApply = document.getElementById('countApply');
  const btn = document.getElementById('continueBtn');

  let selectedMode = null;   // 'learn' | 'test'
  let selectedCount = null;  // number

  function updateContinue(){
    const ok = !!selectedMode && !!selectedCount && selectedCount > 0;
    btn.disabled = !ok;
    btn.className = ok
      ? 'rounded-full bg-blue-500 text-white text-sm font-bold px-6 py-3 hover:bg-blue-600'
      : 'rounded-full bg-blue-500/50 text-white text-sm font-bold px-6 py-3 cursor-not-allowed';
  }

  // Mode selection
  function setMode(val){
    selectedMode = val;
    modeCards.forEach(el=>{
      const active = el.dataset.mode === val;
      el.setAttribute('aria-checked', active ? 'true' : 'false');
      el.classList.toggle('ring-2', active);
      el.classList.toggle('ring-blue-500/40', active);
      el.classList.toggle('border-blue-600', active);
      if(active){ el.classList.add('bg-blue-50'); } else { el.classList.remove('bg-blue-50'); }
    });
    updateContinue();
  }
  modeCards.forEach(el=>{
    el.addEventListener('click', ()=> setMode(el.dataset.mode));
    el.addEventListener('keydown', (e)=> {
      if(e.key === 'Enter' || e.key === ' '){ e.preventDefault(); setMode(el.dataset.mode); }
    });
  });

  // Count selection via chips
  function setCount(n){
    selectedCount = n;
    countChips.forEach(c=>{
      const on = Number(c.dataset.count) === n;
      c.classList.toggle('border-blue-600', on);
      c.classList.toggle('bg-blue-50', on);
    });
    updateContinue();
  }
  countChips.forEach(c=> c.addEventListener('click', ()=> setCount(Number(c.dataset.count))));

  // Count via custom input
  countApply.addEventListener('click', ()=>{
    const n = Number(countInput.value);
    if(!Number.isFinite(n) || n < 1 || n > 200) return;
    setCount(n);
  });

  // Continue → route based on selectedMode + selectedCount
  btn.addEventListener('click', ()=>{
    const q = `?count=${encodeURIComponent(selectedCount)}`;
    if (selectedMode === 'test') {
      location.href = '/stitch/test.html' + q;
    } else {
      location.href = '/stitch/learning.html' + q;
    }
  });

  // Optional: preselect defaults (comment out if not desired)
  // setMode('learn'); setCount(10);
})();
</script>
</body>
</html>
